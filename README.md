# BookML
bookdown flavoured GitBook port for LaTeXML.

This package is mainly a port of the [GitBook style](https://bookdown.org/yihui/bookdown/html.html#gitbook-style) of [bookdown](https://bookdown.org/)for [LaTeXML](https://dlmf.nist.gov/LaTeXML/), but it also offer a few extra features and bugfixes for LaTeXML that can be used with or without the GitBook style:
  - transparent generation of SVG pictures via LaTeX for packages not well supported by LaTeXML, such as Ti*k*Z pictures, animations, Xy-matrices;
  - a simple method to add alternative text for images;
  - partial support for arbitrary HTML content;
  - backport of some minor styling fixes from LaTeXML 0.8.6 such as mobile friendliness as well as the occasional bookdown bugfixes;
  - direct embedding of [MathJax](https://www.mathjax.org/), with the option of choosing between versions 2 and 3 or disabling it.

See the [manual](https://vlmantova.github.io/bookml/) for more details and examples of the commands described below.

## Getting started
1. Install [LaTeXML](https://dlmf.nist.gov/LaTeXML/get.html), minimum version 0.8.5, and optionally a TeX distribution including `latexmk` and `dvisvgm`.
2. Unpack the latest [BookML release](https://github.com/vlmantova/bookml/releases) next to your `.tex` files (the file `bookml.sty` and sibling files must be in the same folder as the `.tex` files, not a subfolder).
3. Add `\usepackage{bookml}` to your preamble.
4. Compile your files with LaTeXML, passing the option `--navigationtoc=context` in postprocessing.

## Package options
<dl>
  <dt><code>style=gitbook</code></dt>
  <dd>Enable the GitBook style (default).</dd>
  <dt><code>style=plain</code></dt>
  <dd>Enable the plain LaTeXML style with some tweaks.</dd>
  <dt><code>style=none</code></dt>
  <dd>Enable the plain LaTeXML style with just backports and fixes.</dd>
  <dt><code>mathjax=2</code></dt>
  <dd>Use MathJax version 2 instead of 3.</dd>
  <dt><code>nomathjax</code></dt>
  <dd>Do not embed MathJax.</dd>
  <dt><code>imagescale=X.XXX</code></dt>
  <dd>Rescale the images generated by LaTeX. This option also takes into account the options <code>8pt</code> ... <code>12pt</code> passed to the document class.</dd>
</dl>

## Customisation

<dl>
  <dt>CSS</dt>
  <dd>Create the folder <code>bmlextras</code> and drop <code>.css</code> in it. If the name of a file contains <code>.gitbook.</code>, it will be used by the GitBook style (likewise for <code>.plain.</code> and <code>.none.</code>).</dd>
  <dt>HTML</dt>
  <dd>Modify <code>LaTeXML-html5.xsl</code>.</dd>
</dl>

## Commands

<dl>
  <dt><code>\iflatexml ... \else ... \fi</code></dt>
  <dd>Execute code only under LaTeXML or only under LaTeX.</dd>
  <dt><code>\bmlDescription{text}</code></dt>
  <dd>Set the <code>alt</code> or <code>aria-label</code> of the <em>immediately</em> preceding image.</dd>
  <dt><code>\bmlPlusClass{class}</code></dt>
  <dd>Add the class <code>class</code> to the <em>immediately</em> preceding element.</dd>
  <dt><code>\bmlImageEnvironment{env}</code></dt>
  <dd>Let LaTeXML convert the environments <code>\begin{env}...\end{env}</code> to SVG images via <code>latexmk</code> and <code>dvisvgm</code> instead of processing them directly.</dd>
  <dt><code>\begin{bmlimage}...\end{bmlimage}</code></dt>
  <dd>Let LaTeXML convert the content to an SVG image via <code>latexmk</code> and <code>dvisvgm</code> instead of processing it directly.</dd>
  <dt><code>\bmlRawHTML{html}</code></dt>
  <dd>Output <code>html</code> directly into the final document. <code>html</code> must be written in XML syntax and LaTeX special characters (such as <code>&%_^\$</code>) must be escaped.</dd>
  <dt><code>\bmlHTMLEnvironment{tag}</code></dt>
  <dd>Create an environment <code>\begin{h:tag} ... \end{h:tag}</code> whose content is output wrapped within <code>&lt;tag&gt; ... &lt;/tag&gt;</code>. Experimental and prone to breakages. Only use with tags that can contain paragraphs.</dd>
</dl>
